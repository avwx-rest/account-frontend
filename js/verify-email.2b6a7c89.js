"use strict";(self["webpackChunkavwx_account"]=self["webpackChunkavwx_account"]||[]).push([[699],{7145:function(e,t,r){r.d(t,{A:function(){return p}});var i=r(641),o=r(33);function s(e,t,r,s,n,a){const l=(0,i.g2)("font-awesome-icon");return(0,i.uX)(),(0,i.CE)("div",{class:(0,o.C4)(["alert","alert-"+e.type]),role:"alert"},[(0,i.bF)(l,{icon:e.icon},null,8,["icon"]),(0,i.eW)("Â "+(0,o.v_)(e.text),1)],2)}var n=r(1114),a=r(1635),l=r(8490);const c={info:"info-circle",success:"check-circle",warning:"exclamation-triangle",danger:"times-circle"};let u=class extends l.lD{constructor(...e){super(...e),(0,n.A)(this,"type",void 0),(0,n.A)(this,"text",void 0)}get icon(){return c[this.type]||"bell"}};(0,a.Cg)([l.kv],u.prototype,"type",void 0),(0,a.Cg)([l.kv],u.prototype,"text",void 0),u=(0,a.Cg)([l.uA],u);var d=(0,l.t$)(u),m=r(6262);const h=(0,m.A)(d,[["render",s]]);var p=h},3629:function(e,t,r){r.d(t,{A:function(){return w}});var i=r(641);const o={class:"form-group"},s=(0,i.Lk)("label",{for:"email"},"Email",-1),n={key:0,class:"form-group"},a={class:"form-group"},l=["disabled"],c={key:1},u=["disabled"];function d(e,t,r,d,m,h){const p=(0,i.g2)("Field"),g=(0,i.g2)("ErrorMessage"),v=(0,i.g2)("Alert"),f=(0,i.g2)("Form");return(0,i.uX)(),(0,i.CE)("div",null,[0==e.email.length?((0,i.uX)(),(0,i.Wv)(f,{key:0,onSubmit:e.sendVerify,"validation-schema":e.schema},{default:(0,i.k6)((()=>[(0,i.Lk)("div",o,[s,(0,i.bF)(p,{name:"email",type:"email",id:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email"}),(0,i.bF)(g,{name:"email",id:"emailHelp",class:"form-text text-muted"})]),e.errorText.length>0?((0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(v,{type:"danger",text:e.errorText},null,8,["text"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",a,[(0,i.Lk)("button",{type:"submit",name:"action",disabled:e.isSubmitting,class:"btn btn-primary"},"Resend Verification Email",8,l)])])),_:1},8,["onSubmit","validation-schema"])):((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.sendVerify({})),disabled:e.isSubmitting,class:"btn btn-primary"},"Resend Verification Email",8,u),e.errorText.length>0?((0,i.uX)(),(0,i.Wv)(v,{key:0,type:"danger",text:e.errorText},null,8,["text"])):(0,i.Q3)("",!0)]))])}var m=r(1114),h=(r(4114),r(1635)),p=r(8490),g=r(3464),v=r(5261),f=r(1250),y=r(2664),b=r(7145),A=r(6720);let k=class extends p.lD{constructor(...e){super(...e),(0,m.A)(this,"email",void 0),(0,m.A)(this,"errorText",""),(0,m.A)(this,"isSubmitting",!1),(0,m.A)(this,"schema",y.object().shape({email:y.string().email("Not a valid email").required("Email is required")})),(0,m.A)(this,"toast",(0,g.useToast)())}sendVerify(e){this.isSubmitting=!0;const t=e.email||this.email;A.A.requestVerify(t).then((()=>{this.toast.success("Verification email resent"),this.$router.push("/login")}),(e=>{if(this.isSubmitting=!1,console.log(e),!f.A.isAxiosError(e))throw this.errorText="An unknown error occurred",e;console.log(e.response?.data),this.errorText=e.response?.data?.detail||`An unknown ${e.response?.status} server error occurred`}))}};(0,h.Cg)([p.kv],k.prototype,"email",void 0),k=(0,h.Cg)([(0,p.uA)({components:{Alert:b.A,Form:v.lV,Field:v.D0,ErrorMessage:v.Kw}})],k);var x=(0,p.t$)(k),E=r(6262);const C=(0,E.A)(x,[["render",d]]);var w=C},3417:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var i=r(641),o=r(33);const s=(0,i.Lk)("p",null,"Verifying...",-1),n={key:0},a={key:1},l=(0,i.Lk)("br",null,null,-1);function c(e,t,r,c,u,d){const m=(0,i.g2)("VerifyEmailForm");return(0,i.uX)(),(0,i.CE)("div",null,[s,e.errorText.length>0?((0,i.uX)(),(0,i.CE)("p",n,(0,o.v_)(e.errorText),1)):(0,i.Q3)("",!0),e.showVerifyEmail?((0,i.uX)(),(0,i.CE)("p",a,[(0,i.eW)(" It looks like your verification code is out of date."),l,(0,i.bF)(m,{email:""})])):(0,i.Q3)("",!0)])}var u=r(1114),d=(r(4114),r(1635)),m=r(8490),h=r(3464),p=r(1250),g=r(6720),v=r(3629);let f=class extends m.lD{constructor(...e){super(...e),(0,u.A)(this,"errorText",""),(0,u.A)(this,"showVerifyEmail",!1),(0,u.A)(this,"toast",(0,h.useToast)())}mounted(){const e=this.$route.query.t||"";g.A.verifyEmail(e).then((()=>{this.toast.success("Email has been verified. Log in to continue"),this.$router.push("/login")}),(e=>{console.log(e),p.A.isAxiosError(e)?(console.log(e.response?.data),401==e.response?.status||422==e.response?.status?this.showVerifyEmail=!0:this.errorText=e.response?.data?.detail||"An unknown error occurred"):this.errorText="An unknown error occurred"}))}};f=(0,d.Cg)([(0,m.uA)({components:{VerifyEmailForm:v.A}})],f);var y=(0,m.t$)(f),b=r(6262);const A=(0,b.A)(y,[["render",c]]);var k=A}}]);
//# sourceMappingURL=verify-email.2b6a7c89.js.map