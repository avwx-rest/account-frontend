"use strict";(self["webpackChunkavwx_account"]=self["webpackChunkavwx_account"]||[]).push([[321],{5077:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ie}});var a=n(641);const s={class:"container py-3"},o=(0,a.Lk)("div",{class:"p-3 pb-md-4 mx-auto text-center"},[(0,a.Lk)("h1",{class:"display-4 fw-normal",style:{color:"#4f68ae"}},"Addons"),(0,a.Lk)("p",{class:"fs-5 text-muted"},"Add additional features to any plan. Yes, even the Hobby plan.")],-1);function r(e,t,n,r,l,d){const i=(0,a.g2)("Header"),c=(0,a.g2)("PlanList"),u=(0,a.g2)("AddonList");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(i,{title:"Plans",subtitle:"Build your project, application, or business with the features and call volume that you need. Basic reports and station information are available to all users while Pro and Enterprise users unlock advanced features with higher daily limits."}),(0,a.Lk)("main",null,[(0,a.bF)(c),o,(0,a.bF)(u)])])}var l=n(1635),d=n(8490),i=n(6205);const c={class:"row row-cols-1 row-cols-md-3 mb-3 text-center"};function u(e,t,n,s,o,r){const l=(0,a.g2)("AddonRow");return(0,a.uX)(),(0,a.CE)("div",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.addons,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.key},[(0,a.bF)(l,{addon:t,onReloadUser:e.reloadUser},null,8,["addon","onReloadUser"])])))),128))])}var p=n(1114),h=n(33);const y={class:"col"},k={class:"card-header py-3"},b={class:"my-0 fw-normal"},v={class:"card-body"},m={key:0};function g(e,t,n,s,o,r){return(0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("div",{class:(0,h.C4)(["card mb-4 rounded-3 shadow-sm",{"card-added":e.userHasAddon}])},[(0,a.Lk)("div",k,[(0,a.Lk)("h4",b,(0,h.v_)(e.addon.name),1)]),(0,a.Lk)("div",v,[(0,a.Lk)("p",null,(0,h.v_)(e.addon.description),1),e.loggedIn?((0,a.uX)(),(0,a.CE)("div",m,[e.userHasAddon?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=(...t)=>e.removeAddon&&e.removeAddon(...t)),class:"w-100 btn btn-lg btn-secondary"},"Remove")):((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[1]||(t[1]=(...t)=>e.addAddon&&e.addAddon(...t)),class:"w-100 btn btn-lg btn-primary"},"Add to plan"))])):(0,a.Q3)("",!0),e.addon.documentation?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[2]||(t[2]=(...t)=>e.openDocs&&e.openDocs(...t)),class:"w-100 btn btn-lg btn-primary"},"Documentation")):(0,a.Q3)("",!0)])],2)])}var w=n(3464),A=n(1526);class f{async getPlans(){const e=await A.A.get("plan/all");return e.data}async changePlan(e){const t=await A.A.post("plan",{key:e,remove_addons:!1});return t.data?.url}async cancelPlan(){await A.A.post("plan",{key:"free",remove_addons:!0})}async getAddons(){const e=await A.A.get("addon/all");return e.data}async addAddon(e){const t=await A.A.post("addon/"+e,null);return t.data?.url}async removeAddon(e){await A.A.delete("addon/"+e)}}const C=new f;var x=C,P=n(1424),L=n(71);let S=class extends d.lD{constructor(...e){super(...e),(0,p.A)(this,"addon",void 0),(0,p.A)(this,"toast",(0,w.useToast)()),(0,p.A)(this,"authStore",(0,P.n)()),(0,p.A)(this,"userStore",(0,L.k)())}get loggedIn(){return this.authStore.loggedIn}get userAddons(){return this.userStore.addons||[]}get userKeys(){return this.userAddons.map((e=>e.key))}get userHasAddon(){return this.userKeys.includes(this.addon.key)}openDocs(){this.addon.documentation&&(location.href=this.addon.documentation)}addAddon(){let e;this.userStore.user?.stripe?.subscription_id||(e=window.open()),x.addAddon(this.addon.key).then((t=>{t&&e?e.location.href=t:(this.toast.success(`${this.addon.name} addon added`),this.$emit("reloadUser"))}),(e=>{console.log(e),this.toast.error("There was an error adding the addon")}))}removeAddon(){x.removeAddon(this.addon.key).then((()=>{this.toast.success(`${this.addon.name} addon removed`),this.$emit("reloadUser")}),(e=>{console.log(e),this.toast.error("There was an error removing the addon")}))}};(0,l.Cg)([d.kv],S.prototype,"addon",void 0),S=(0,l.Cg)([(0,d.uA)({emits:["reloadUser"]})],S);var E=(0,d.t$)(S),X=n(6262);const M=(0,X.A)(E,[["render",g]]);var $=M,_=n(8839);const F={free:{links:[{text:"Station Info",link:"https://avwx.docs.apiary.io/#reference/0/station"},{text:"Station Search",link:"https://avwx.docs.apiary.io/#reference/0/station-search"},{text:"Nearest Stations",link:"https://avwx.docs.apiary.io/#reference/0/nearest-stations"},{text:"METAR",link:"https://avwx.docs.apiary.io/#reference/0/metar"},{text:"TAF",link:"https://avwx.docs.apiary.io/#reference/0/taf"}]},pro:{preface:"All Hobby features +",links:[{text:"PIREP",link:"https://avwx.docs.apiary.io/#reference/0/pirep"},{text:"AIR / SIGMET",link:"https://avwx.docs.apiary.io/#reference/0/airsigmet"},{text:"NBM",link:"https://avwx.docs.apiary.io/#reference/0/nbm"},{text:"GFS",link:"https://avwx.docs.apiary.io/#reference/0/gfs"},{text:"Multiple Reports",link:"https://avwx.docs.apiary.io/#reference/0/multiple-reports"},{text:"Nearest Reports",link:"https://avwx.docs.apiary.io/#reference/0/nearest-reports"},{text:"Report Search",link:"https://avwx.docs.apiary.io/#reference/0/report-search"}]},enterprise:{preface:"All Pro features +",links:[{text:"NOTAM",link:"https://avwx.docs.apiary.io/#reference/0/notam"},{text:"Flight Routing",link:"https://avwx.docs.apiary.io/#reference/0/report-routing"},{text:"Historic Reports",link:"https://avwxhistory.docs.apiary.io"},{text:"Priority Support"}]}};function I(){return{plans:{},addons:[]}}function R(e){const t={},n={};for(const a of e){a.key.endsWith("-year")&&(n[a.key.replace("-year","")]=a.price);const e=F[a.key];e&&(t[a.key]={...a,...e})}for(const a in t)t[a].yearly=n[t[a].key];return t}const D=(0,_.nY)("publicdata",{state:I,actions:{async getPlans(){const e=await x.getPlans();this.plans=R(e)},async getAddons(){const e=await x.getAddons();this.addons=e}}});let H=class extends d.lD{constructor(...e){super(...e),(0,p.A)(this,"publicStore",D()),(0,p.A)(this,"userStore",(0,L.k)())}get addons(){return this.publicStore.addons}mounted(){this.publicStore.getAddons()}reloadUser(){this.userStore.getUser()}};H=(0,l.Cg)([(0,d.uA)({components:{AddonRow:$}})],H);var U=(0,d.t$)(H);const T=(0,X.A)(U,[["render",u]]);var Y=T;const N={class:"row row-cols-1 row-cols-md-3 mb-3 text-center"};function Q(e,t,n,s,o,r){const l=(0,a.g2)("CancelPlanModal"),d=(0,a.g2)("PlanDetail");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l,{onCancel:t[0]||(t[0]=t=>e.cancelPlan()),onChange:t[1]||(t[1]=t=>e.switchPlan("free"))}),(0,a.Lk)("div",N,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.keys,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[e.plans[t]?((0,a.uX)(),(0,a.Wv)(d,{key:0,plan:e.plans[t],onSwitchPlan:e.switchPlan},null,8,["plan","onSwitchPlan"])):(0,a.Q3)("",!0)])))),128))])])}var K=n(3751);const B={class:"col"},W={class:"card-header py-3"},G={class:"my-0 fw-normal"},j={class:"card-body"},O={key:0,class:"row card-title pricing-card-title"},q={class:"w-50"},z=(0,a.Lk)("small",null,"Monthly",-1),J={class:"w-50"},V=(0,a.Lk)("small",null,"Yearly",-1),Z={key:1,class:"card-title pricing-card-title"},ee={class:"text-muted fw-light"},te={class:"list-unstyled mt-3 mb-4"},ne=["href"],ae={key:1},se={key:2},oe={key:0,class:"w-100 btn btn-lg btn-outline-secondary",disabled:""},re={key:1,class:"w-100 btn btn-lg btn-secondary",type:"button","data-bs-toggle":"modal","data-bs-target":"#cancelPlanModal"},le={key:3,class:"w-100 btn btn-lg btn-outline-secondary",disbaled:""};function de(e,t,n,s,o,r){return(0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("div",{class:(0,h.C4)(["card mb-4 rounded-3 shadow-sm",[e.styleName]])},[(0,a.Lk)("div",W,[(0,a.Lk)("h4",G,(0,h.v_)(e.plan.name),1)]),(0,a.Lk)("div",j,[void 0!=e.plan.yearly?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.Lk)("div",q,[z,(0,a.Lk)("h1",null,(0,h.v_)(e.monthlyPrice),1)]),(0,a.Lk)("div",J,[V,(0,a.Lk)("h1",null,(0,h.v_)(e.yearlyPrice),1)])])):((0,a.uX)(),(0,a.CE)("h1",Z,[(0,a.eW)((0,h.v_)(e.monthlyPrice),1),(0,a.bo)((0,a.Lk)("small",ee,"/mo",512),[[K.aG,e.plan.price>0]])])),(0,a.Lk)("ul",te,[(0,a.bo)((0,a.Lk)("li",null,[(0,a.Lk)("b",null,(0,h.v_)(e.plan.preface),1)],512),[[K.aG,e.plan.preface]]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.plan.links,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.text},[e.link?((0,a.uX)(),(0,a.CE)("a",{key:0,href:e.link},(0,h.v_)(e.text),9,ne)):((0,a.uX)(),(0,a.CE)("div",ae,(0,h.v_)(e.text),1))])))),128)),(0,a.Lk)("li",null,[(0,a.Lk)("b",null,(0,h.v_)(e.callCount),1),(0,a.eW)(" calls per day")])]),e.loggedIn?((0,a.uX)(),(0,a.CE)("div",se,[e.userPlan&&e.userPlan.key==e.plan.key?((0,a.uX)(),(0,a.CE)("button",oe,"Current Plan")):"free"==e.plan.key?((0,a.uX)(),(0,a.CE)("button",re,"Switch to Free")):((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[0]||(t[0]=t=>e.switchPlan()),class:"w-100 btn btn-lg btn-primary"},"Start Monthly")),e.userPlan&&e.userPlan.key==e.plan.key+"-year"?((0,a.uX)(),(0,a.CE)("button",le,"Current Plan")):"free"!=e.plan.key?((0,a.uX)(),(0,a.CE)("button",{key:4,onClick:t[1]||(t[1]=t=>e.switchPlan("-year")),class:"w-100 btn btn-lg btn-primary"},"Start Yearly")):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])],2)])}let ie=class extends d.lD{constructor(...e){super(...e),(0,p.A)(this,"plan",void 0),(0,p.A)(this,"authStore",(0,P.n)()),(0,p.A)(this,"userStore",(0,L.k)())}get loggedIn(){return this.authStore.loggedIn}get userPlan(){return this.userStore.plan}get styleName(){return"plan-"+this.plan.key}get monthlyPrice(){return this.plan.price&&0!=this.plan.price?`$${this.plan.price}`:"Free"}get yearlyPrice(){return this.plan.yearly?`$${this.plan.yearly}`:""}get callCount(){let e,t;return this.plan.limit>=1e6?(e=this.plan.limit/1e6,t="M"):(e=this.plan.limit/1e3,t="k"),e.toFixed(1).replace(".0","")+t}switchPlan(e){let t=this.plan.key;e&&(t+=e),this.$emit("switchPlan",t)}};(0,l.Cg)([d.kv],ie.prototype,"plan",void 0),ie=(0,l.Cg)([(0,d.uA)({emits:["switchPlan"]})],ie);var ce=(0,d.t$)(ie);const ue=(0,X.A)(ce,[["render",de]]);var pe=ue;const he={class:"modal fade",id:"cancelPlanModal",tabindex:"-1","aria-labelledby":"planModalLabel","aria-hidden":"true"},ye={class:"modal-dialog"},ke={class:"modal-content"},be=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"planModalLabel"},"Cancel your Subscription?"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ve={class:"modal-body"},me=(0,a.Lk)("p",null,"You're about to downgrade your subscirption.",-1),ge={key:0},we={class:"modal-footer"},Ae=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function fe(e,t,n,s,o,r){return(0,a.uX)(),(0,a.CE)("div",he,[(0,a.Lk)("div",ye,[(0,a.Lk)("div",ke,[be,(0,a.Lk)("div",ve,[me,e.userHasAddons?((0,a.uX)(),(0,a.CE)("p",ge,"You still have addons. Would you like to keep them and just downgrade your plan?")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",we,[Ae,e.userHasAddons?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("change")),type:"button",class:"btn btn-primary"},"Yes, Keep Addons")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("cancel")),type:"button",class:"btn btn-danger"},(0,h.v_)(e.userHasAddons?"Cancel Everything":"Continue"),1)])])])])}let Ce=class extends d.lD{constructor(...e){super(...e),(0,p.A)(this,"userStore",(0,L.k)())}get userHasAddons(){return this.userStore.addons.length>0}};Ce=(0,l.Cg)([(0,d.uA)({emits:["cancel","change"]})],Ce);var xe=(0,d.t$)(Ce);const Pe=(0,X.A)(xe,[["render",fe]]);var Le=Pe;let Se=class extends d.lD{constructor(...e){super(...e),(0,p.A)(this,"keys",["free","pro","enterprise"]),(0,p.A)(this,"toast",(0,w.useToast)()),(0,p.A)(this,"publicStore",D()),(0,p.A)(this,"userStore",(0,L.k)())}get plans(){return this.publicStore.plans}mounted(){this.publicStore.getPlans()}reloadUser(){this.userStore.getUser()}switchPlan(e){let t;this.userStore.user?.stripe?.subscription_id||(t=window.open()),x.changePlan(e).then((e=>{e&&t?t.location.href=e:(this.toast.success("Successfully updated your plan"),this.reloadUser())}),(e=>{console.log(e),this.toast.error("There was an error updating your plan")}))}hideCancelModal(){const e=document.getElementById("cancelPlanModal");e&&e.remove();for(const t of document.getElementsByClassName("modal-backdrop"))t.remove()}cancelPlan(){x.cancelPlan().then((()=>{this.toast.success("Your plan has been cancelled"),this.hideCancelModal(),this.reloadUser()}),(e=>{console.log(e),this.toast.error("There was an error cancelling your plan")}))}};Se=(0,l.Cg)([(0,d.uA)({components:{CancelPlanModal:Le,PlanDetail:pe}})],Se);var Ee=(0,d.t$)(Se);const Xe=(0,X.A)(Ee,[["render",Q]]);var Me=Xe;let $e=class extends d.lD{};$e=(0,l.Cg)([(0,d.uA)({components:{AddonList:Y,Header:i.A,PlanList:Me}})],$e);var _e=(0,d.t$)($e);const Fe=(0,X.A)(_e,[["render",r]]);var Ie=Fe}}]);
//# sourceMappingURL=plans.9b36aa40.js.map