"use strict";(self["webpackChunkavwx_account"]=self["webpackChunkavwx_account"]||[]).push([[224],{7145:function(e,t,s){s.d(t,{A:function(){return p}});var r=s(641),n=s(33);function a(e,t,s,a,i,o){const c=(0,r.g2)("font-awesome-icon");return(0,r.uX)(),(0,r.CE)("div",{class:(0,n.C4)(["alert","alert-"+e.type]),role:"alert"},[(0,r.bF)(c,{icon:e.icon},null,8,["icon"]),(0,r.eW)("Â "+(0,n.v_)(e.text),1)],2)}var i=s(1114),o=s(1635),c=s(8490);const l={info:"info-circle",success:"check-circle",warning:"exclamation-triangle",danger:"times-circle"};let m=class extends c.lD{constructor(...e){super(...e),(0,i.A)(this,"type",void 0),(0,i.A)(this,"text",void 0)}get icon(){return l[this.type]||"bell"}};(0,o.Cg)([c.kv],m.prototype,"type",void 0),(0,o.Cg)([c.kv],m.prototype,"text",void 0),m=(0,o.Cg)([c.uA],m);var d=(0,c.t$)(m),u=s(6262);const g=(0,u.A)(d,[["render",a]]);var p=g},2019:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var r=s(641);const n={class:"container py-3"};function a(e,t,s,a,i,o){const c=(0,r.g2)("Header"),l=(0,r.g2)("RegisterForm"),m=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(c,{title:"Register"}),(0,r.Lk)("main",null,[(0,r.bF)(l),(0,r.bF)(m,{to:"/login",class:"btn-flat white-text"},{default:(0,r.k6)((()=>[(0,r.eW)("Already registered? Sign in")])),_:1})])])}var i=s(1635),o=s(8490),c=s(6205);const l={class:"form-group"},m=(0,r.Lk)("label",{for:"email"},"Email",-1),d={class:"form-group"},u=(0,r.Lk)("label",{for:"password"},"Password",-1),g={class:"form-group"},p=(0,r.Lk)("label",{for:"confirm"},"Confirm Password",-1),h={key:0,class:"form-group"},f={class:"form-group"},b=["disabled"];function w(e,t,s,n,a,i){const o=(0,r.g2)("Field"),c=(0,r.g2)("ErrorMessage"),w=(0,r.g2)("Alert"),v=(0,r.g2)("Form");return(0,r.uX)(),(0,r.Wv)(v,{onSubmit:e.register,"validation-schema":e.schema},{default:(0,r.k6)((()=>[(0,r.Lk)("div",l,[m,(0,r.bF)(o,{name:"email",type:"email",id:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email"}),(0,r.bF)(c,{name:"email",id:"emailHelp",class:"form-text text-muted"})]),(0,r.Lk)("div",d,[u,(0,r.bF)(o,{name:"password",type:"password",id:"password",class:"form-control","aria-describedby":"passwordHelp",placeholder:"Password"}),(0,r.bF)(c,{name:"password",id:"passwordHelp",class:"form-text text-muted"})]),(0,r.Lk)("div",g,[p,(0,r.bF)(o,{name:"confirm",type:"password",id:"confirm",class:"form-control","aria-describedby":"confirmHelp",placeholder:"Confirm password"}),(0,r.bF)(c,{name:"confirm",id:"confirmHelp",class:"form-text text-muted"})]),e.errorText.length>0?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.bF)(w,{type:"danger",text:e.errorText},null,8,["text"])])):(0,r.Q3)("",!0),(0,r.Lk)("div",f,[(0,r.Lk)("button",{type:"submit",name:"action",disabled:e.isSubmitting,class:"btn btn-primary"},"Register",8,b)])])),_:1},8,["onSubmit","validation-schema"])}var v=s(1114),x=(s(4114),s(5261)),A=s(3464),k=s(1250),y=s(2664),$=s(8701),F=s.n($),C=s(7145),L=s(1424);F()(y);let S=class extends o.lD{constructor(...e){super(...e),(0,v.A)(this,"errorText",""),(0,v.A)(this,"isSubmitting",!1),(0,v.A)(this,"schema",y.object().shape({email:y.string().email("Not a valid email").required("Email is required"),password:y.string().password().required("Password is required"),confirm:y.string().oneOf([y.ref("password"),void 0],"Passwords must match")})),(0,v.A)(this,"toast",(0,A.useToast)()),(0,v.A)(this,"authStore",(0,L.n)())}async register(e){this.isSubmitting=!0,await this.$recaptchaLoaded();const t={email:e.email,password:e.password,token:await this.$recaptcha("login")};this.authStore.register(t).then((()=>{this.toast.success("Registered. Check your email to continue"),this.$router.push("/login")}),(e=>{if(this.isSubmitting=!1,console.log(e),!k.A.isAxiosError(e))throw this.errorText="An unknown error occurred",e;console.log(e.response?.data),this.errorText=e.response?.data?.detail||"An unknown error occurred"}))}};S=(0,i.Cg)([(0,o.uA)({components:{Alert:C.A,Form:x.lV,Field:x.D0,ErrorMessage:x.Kw}})],S);var E=(0,o.t$)(S),M=s(6262);const R=(0,M.A)(E,[["render",w]]);var H=R;let T=class extends o.lD{};T=(0,i.Cg)([(0,o.uA)({components:{Header:c.A,RegisterForm:H}})],T);var q=(0,o.t$)(T);const P=(0,M.A)(q,[["render",a]]);var W=P},8701:function(e){const t=function(e,t){return 1===t?e:`${e}s`},s=function(e){return null===e||void 0===e};function r(e=1,r){const n=r||"${path} must contain at least ${length} lowercase "+t("letter",e);return this.test({name:"minLowercase",exclusive:!0,message:n,params:{length:e},test(t){return s(t)||(t.match(/[a-z]/g)||[]).length>=e}})}function n(e=1,r){const n=r||"${path} must contain at least ${length} uppercase "+t("letter",e);return this.test({name:"minUppercase",exclusive:!0,message:n,params:{length:e},test(t){return s(t)||(t.match(/[A-Z]/g)||[]).length>=e}})}function a(e=1,r){const n=r||"${path} must contain at least ${length} "+t("number",e);return this.test({name:"minNumber",exclusive:!0,message:n,params:{length:e},test(t){return s(t)||(t.match(/[0-9]/g)||[]).length>=e}})}function i(e=1,r){const n=r||"${path} must contain at least ${length} "+t("symbol",e);return this.test({name:"minSymbol",exclusive:!0,message:n,params:{length:e},test(t){return s(t)||(t.match(/[^a-zA-Z0-9\s]/g)||[]).length>=e}})}function o(e=2,r){const n=r||"${path} must not contain sequences of more than ${length} repeated "+t("character",e);return this.test({name:"maxRepeating",exclusive:!0,message:n,params:{length:e},test(t){return s(t)||!new RegExp(`(.)\\1{${e},}`).test(t)}})}function c(e=2,r){const n=r||"${path} must contain at least ${length} "+t("word",e),a=new RegExp("[a-zA-Z0-9]");return this.test({name:"minWords",exclusive:!0,message:n,params:{length:e},test(t){return s(t)||t.split(" ").filter((e=>!!e&&a.test(e))).length>=e}})}function l(){return this.min(8).max(250).minLowercase(1).minUppercase(1).minNumbers(1).minSymbols(1)}function m(e){e.addMethod(e.string,"minLowercase",r),e.addMethod(e.string,"minUppercase",n),e.addMethod(e.string,"minNumbers",a),e.addMethod(e.string,"minSymbols",i),e.addMethod(e.string,"minRepeating",o),e.addMethod(e.string,"maxRepeating",o),e.addMethod(e.string,"minWords",c),e.addMethod(e.string,"password",l)}e.exports=m}}]);
//# sourceMappingURL=register.31b70d10.js.map