"use strict";(self["webpackChunkavwx_account"]=self["webpackChunkavwx_account"]||[]).push([[966],{7145:function(e,r,t){t.d(r,{A:function(){return h}});var i=t(641),o=t(33);function s(e,r,t,s,a,n){const l=(0,i.g2)("font-awesome-icon");return(0,i.uX)(),(0,i.CE)("div",{class:(0,o.C4)(["alert","alert-"+e.type]),role:"alert"},[(0,i.bF)(l,{icon:e.icon},null,8,["icon"]),(0,i.eW)(" "+(0,o.v_)(e.text),1)],2)}var a=t(1114),n=t(1635),l=t(8490);const d={info:"info-circle",success:"check-circle",warning:"exclamation-triangle",danger:"times-circle"};let u=class extends l.lD{constructor(...e){super(...e),(0,a.A)(this,"type",void 0),(0,a.A)(this,"text",void 0)}get icon(){return d[this.type]||"bell"}};(0,n.Cg)([l.kv],u.prototype,"type",void 0),(0,n.Cg)([l.kv],u.prototype,"text",void 0),u=(0,n.Cg)([l.uA],u);var c=(0,l.t$)(u),m=t(6262);const g=(0,m.A)(c,[["render",s]]);var h=g},3629:function(e,r,t){t.d(r,{A:function(){return F}});var i=t(641);const o={class:"form-group"},s=(0,i.Lk)("label",{for:"email"},"Email",-1),a={key:0,class:"form-group"},n={class:"form-group"},l=["disabled"],d={key:1},u=["disabled"];function c(e,r,t,c,m,g){const h=(0,i.g2)("Field"),p=(0,i.g2)("ErrorMessage"),f=(0,i.g2)("Alert"),b=(0,i.g2)("Form");return(0,i.uX)(),(0,i.CE)("div",null,[0==e.email.length?((0,i.uX)(),(0,i.Wv)(b,{key:0,onSubmit:e.sendVerify,"validation-schema":e.schema},{default:(0,i.k6)((()=>[(0,i.Lk)("div",o,[s,(0,i.bF)(h,{name:"email",type:"email",id:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email"}),(0,i.bF)(p,{name:"email",id:"emailHelp",class:"form-text text-muted"})]),e.errorText.length>0?((0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(f,{type:"danger",text:e.errorText},null,8,["text"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",n,[(0,i.Lk)("button",{type:"submit",name:"action",disabled:e.isSubmitting,class:"btn btn-primary"},"Resend Verification Email",8,l)])])),_:1},8,["onSubmit","validation-schema"])):((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("button",{onClick:r[0]||(r[0]=r=>e.sendVerify({})),disabled:e.isSubmitting,class:"btn btn-primary"},"Resend Verification Email",8,u),e.errorText.length>0?((0,i.uX)(),(0,i.Wv)(f,{key:0,type:"danger",text:e.errorText},null,8,["text"])):(0,i.Q3)("",!0)]))])}var m=t(1114),g=(t(4114),t(1635)),h=t(8490),p=t(3464),f=t(5261),b=t(1250),v=t(2664),y=t(7145),A=t(6720);let w=class extends h.lD{constructor(...e){super(...e),(0,m.A)(this,"email",void 0),(0,m.A)(this,"errorText",""),(0,m.A)(this,"isSubmitting",!1),(0,m.A)(this,"schema",v.object().shape({email:v.string().email("Not a valid email").required("Email is required")})),(0,m.A)(this,"toast",(0,p.useToast)())}sendVerify(e){this.isSubmitting=!0;const r=e.email||this.email;A.A.requestVerify(r).then((()=>{this.toast.success("Verification email resent"),this.$router.push("/login")}),(e=>{if(this.isSubmitting=!1,console.log(e),!b.A.isAxiosError(e))throw this.errorText="An unknown error occurred",e;console.log(e.response?.data),this.errorText=e.response?.data?.detail||`An unknown ${e.response?.status} server error occurred`}))}};(0,g.Cg)([h.kv],w.prototype,"email",void 0),w=(0,g.Cg)([(0,h.uA)({components:{Alert:y.A,Form:f.lV,Field:f.D0,ErrorMessage:f.Kw}})],w);var k=(0,h.t$)(w),x=t(6262);const E=(0,x.A)(k,[["render",c]]);var F=E},8796:function(e,r,t){t.r(r),t.d(r,{default:function(){return W}});var i=t(641);const o={class:"container py-3"},s={key:0},a=(0,i.Lk)("br",null,null,-1);function n(e,r,t,n,l,d){const u=(0,i.g2)("Header"),c=(0,i.g2)("Alert"),m=(0,i.g2)("LoginForm"),g=(0,i.g2)("router-link"),h=(0,i.g2)("VerifyEmailForm");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(u,{title:"Login"}),(0,i.Lk)("main",null,[(0,i.bF)(c,{type:"info",text:"If you haven't yet logged in to the new account portal, you'll need to reset your password using the Forgot Password link below"}),(0,i.bF)(m,{onForward:e.forward,onVerify:e.setVerifyEmail},null,8,["onForward","onVerify"]),(0,i.bF)(g,{to:"/register"},{default:(0,i.k6)((()=>[(0,i.eW)("New Here? Register")])),_:1}),(0,i.eW)("  "),(0,i.bF)(g,{to:"/forgot-password"},{default:(0,i.k6)((()=>[(0,i.eW)("Forgot your Password?")])),_:1}),0!=e.verifyEmail.length?((0,i.uX)(),(0,i.CE)("p",s,[(0,i.eW)(" Your email has not yet been verified."),a,(0,i.bF)(h,{email:e.verifyEmail},null,8,["email"])])):(0,i.Q3)("",!0)])])}var l=t(1114),d=(t(4114),t(1635)),u=t(8490),c=t(6205),m=t(7145);const g={class:"form-group"},h=(0,i.Lk)("label",{for:"email"},"Email",-1),p={class:"form-group"},f=(0,i.Lk)("label",{for:"password"},"Password",-1),b={key:0,class:"form-group"},v={class:"form-group"},y=["disabled"];function A(e,r,t,o,s,a){const n=(0,i.g2)("Field"),l=(0,i.g2)("ErrorMessage"),d=(0,i.g2)("Alert"),u=(0,i.g2)("Form");return(0,i.uX)(),(0,i.Wv)(u,{onSubmit:e.handleLogin,"validation-schema":e.schema},{default:(0,i.k6)((()=>[(0,i.Lk)("div",g,[h,(0,i.bF)(n,{name:"email",type:"email",id:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email"}),(0,i.bF)(l,{name:"email",id:"emailHelp",class:"form-text text-muted"})]),(0,i.Lk)("div",p,[f,(0,i.bF)(n,{name:"password",type:"password",id:"password",class:"form-control","aria-describedby":"passwordHelp",placeholder:"Password"}),(0,i.bF)(l,{name:"password",id:"passwordHelp",class:"form-text text-muted"})]),e.errorText.length>0?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(d,{type:"danger",text:e.errorText},null,8,["text"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",v,[(0,i.Lk)("button",{type:"submit",name:"action",disabled:e.isSubmitting,class:"btn btn-primary"},"Login",8,y)])])),_:1},8,["onSubmit","validation-schema"])}var w=t(5261),k=t(1250),x=t(2664),E=t(1424);let F=class extends u.lD{constructor(...e){super(...e),(0,l.A)(this,"verifyEmail",""),(0,l.A)(this,"errorText",""),(0,l.A)(this,"isSubmitting",!1),(0,l.A)(this,"schema",x.object().shape({email:x.string().email("Not a valid email").required("Email is required"),password:x.string().required("Password is required")})),(0,l.A)(this,"authStore",(0,E.n)())}handleLogin(e){this.isSubmitting=!0,this.authStore.login(e).then((()=>this.$emit("forward")),(r=>{if(this.isSubmitting=!1,console.log(r),!k.A.isAxiosError(r))throw this.errorText="An unknown error occurred",r;{console.log(r.response?.data);const t=r.response?.data?.detail||"An unknown server error occurred";400==r.response?.status&&"Email is not yet verified"==t?this.$emit("verify",e.email):this.errorText=t}}))}};F=(0,d.Cg)([(0,u.uA)({components:{Alert:m.A,Form:w.lV,Field:w.D0,ErrorMessage:w.Kw},emits:["forward","verify"]})],F);var L=(0,u.t$)(F),C=t(6262);const S=(0,C.A)(L,[["render",A]]);var V=S,T=t(3629);let X=class extends u.lD{constructor(...e){super(...e),(0,l.A)(this,"verifyEmail",""),(0,l.A)(this,"authStore",(0,E.n)())}forward(){this.$router.push(this.$route.params["nextUrl"]||"/")}created(){this.loggedIn&&this.forward()}setVerifyEmail(e){this.verifyEmail=e}get loggedIn(){return this.authStore.loggedIn}};X=(0,d.Cg)([(0,u.uA)({components:{Alert:m.A,Header:c.A,LoginForm:V,VerifyEmailForm:T.A}})],X);var $=(0,u.t$)(X);const H=(0,C.A)($,[["render",n]]);var W=H}}]);
//# sourceMappingURL=login.69c67a0c.js.map